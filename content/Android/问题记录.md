运行问题记录
--------------------------------------------

# gradle 配置国内镜像:

全局配置: 在 ${USER_HOME}/.gradle/下创建文件:`init.gradle`。内容如下:
````
allprojects{
    repositories {
        def ALIYUN_REPOSITORY_URL = 'https://maven.aliyun.com/repository/public/'
        def ALIYUN_JCENTER_URL = 'https://maven.aliyun.com/repository/jcenter/'
        def ALIYUN_GOOGLE_URL = 'https://maven.aliyun.com/repository/google/'
        def ALIYUN_GRADLE_PLUGIN_URL = 'https://maven.aliyun.com/repository/gradle-plugin/'
        all { ArtifactRepository repo ->
            if(repo instanceof MavenArtifactRepository){
                def url = repo.url.toString()
                if (url.startsWith('https://repo1.maven.org/maven2/')) {
                    project.logger.lifecycle "Repository ${repo.url} replaced by $ALIYUN_REPOSITORY_URL."
                    remove repo
                }
                if (url.startsWith('https://jcenter.bintray.com/')) {
                    project.logger.lifecycle "Repository ${repo.url} replaced by $ALIYUN_JCENTER_URL."
                    remove repo
                }
                if (url.startsWith('https://dl.google.com/dl/android/maven2/')) {
                    project.logger.lifecycle "Repository ${repo.url} replaced by $ALIYUN_GOOGLE_URL."
                    remove repo
                }
                if (url.startsWith('https://plugins.gradle.org/m2/')) {
                    project.logger.lifecycle "Repository ${repo.url} replaced by $ALIYUN_GRADLE_PLUGIN_URL."
                    remove repo
                }
            }
        }
        maven {
            allowInsecureProtocol = true
			url ALIYUN_REPOSITORY_URL
		}
        maven { 
            allowInsecureProtocol = true
			url ALIYUN_JCENTER_URL 
		}
        maven { 
            allowInsecureProtocol = true
			url ALIYUN_GOOGLE_URL
		}
        maven { 
            allowInsecureProtocol = true
			url ALIYUN_GRADLE_PLUGIN_URL 
		}
    }
}

````

参考资料: [gradle配置国内镜像](https://blog.csdn.net/lj402159806/article/details/78422953?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-78422953-blog-124383594.pc_relevant_multi_platform_whitelistv4&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-78422953-blog-124383594.pc_relevant_multi_platform_whitelistv4&utm_relevant_index=1)


# 解决Flutter运行一直卡在 Running Gradle task ‘assembleDebug‘
原因:

出现这个问题是因为没有使用国内镜像，导致拉不到相关包导致。

解决办法:
修改gradle工具使用的源:

进入目录:flutter sdk/packages\flutter_tools\gradle。修改文件fluter.gradle

1. 修改buiuldscript repositories内容，具体如下:
	````
	buildscript {
	    repositories {
			maven { url 'https://maven.aliyun.com/repository/google' }
			maven { url 'https://maven.aliyun.com/repository/jcenter' }
	        maven {
	            allowInsecureProtocol = true
	            url 'http://maven.aliyun.com/nexus/content/groups/public'
	        }
	        //google()
	        //mavenCentral()
	    }
	    dependencies {
	        /* When bumping, also update ndkVersion above. */
	        classpath 'com.android.tools.build:gradle:4.1.0'
	    }
	}
	````
2. 修改`DEFAULT_MAVEN_HOST`的值为`https://storage.flutter-io.cn`。具体如下:
	````
	class FlutterPlugin implements Plugin<Project> {
	    //private static final String DEFAULT_MAVEN_HOST = "https://storage.googleapis.com";
		private static final String DEFAULT_MAVEN_HOST = "https://storage.flutter-io.cn";
	````


参考资料: https://blog.csdn.net/qq_36532805/article/details/125118215

# 启动模拟器出现Timed out after 300seconds waiting for emulator to come online“解决方案

解决方法:

升级工具 Android Emulator到最新版本: Tools->SDK Manager ->选择 SDK Tools ->勾选Android emulator进行升级

参考资料: https://blog.csdn.net/qq_42595610/article/details/115844849

# 解决 Android studio的设备列表中没有Android设备的问题。

运行 `flutter doctor`。根据提示，一般是andoird SDK没有设置环境变量导致。添加环境变量`ANDROID_HOME`指向SDK目录即可，例如:`\Android\Sdk`